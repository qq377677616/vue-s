(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-95b4bb18"],{"0548":function(a,t,e){"use strict";var o=e("8473e"),n=e.n(o);n.a},"71c2":function(a,t,e){"use strict";var o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"header"},[e("div",{staticClass:"wrap"},[a.isBack?e("div",{staticClass:"back",on:{click:a.back}},[e("i",{staticClass:"iconfont icon-fanhui1"})]):a._e(),e("h3",[a._v(a._s(a.title))])])])},n=[],i=(e("e35a"),e("5e9f"),{name:"",props:{title:{type:String,default:"页面标题"},isBack:{type:Boolean,default:!0}},data:function(){return{}},methods:{back:function(){var a=sessionStorage.getItem("prevPage")||"/";this.$router.replace(a),sessionStorage.setItem("prevPage","")}}}),r=i,s=(e("0548"),e("9ca4")),l=Object(s["a"])(r,o,n,!1,null,"20ec2505",null);t["a"]=l.exports},"8473e":function(a,t,e){},"982c":function(a,t,e){"use strict";e.r(t);var o=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",{staticClass:"body"},[e("my-header",{attrs:{title:a.pageTitle}}),e("panorama-week",{attrs:{panoramaConfig:a.panoramaConfig},on:{hotspotClick:a.hotspotClick}})],1)},n=[],i=(e("e35a"),e("5e9f"),e("71c2")),r=function(){var a=this,t=a.$createElement,e=a._self._c||t;return e("div",[e("div",{ref:"panorama",attrs:{id:"panorama"}})])},s=[],l=(e("b4fb"),e("fe59"),e("ecb4"),e("77ad"),e("053b"),e("20a5"),e("0d7a"),e("08ba"),{name:"",props:{panoramaConfig:{type:Object,value:{}}},data:function(){return{anta:null}},mounted:function(){this.panoramaInit()},methods:{panoramaInit:function(){for(var a=[],t=this.panoramaConfig,e=this.getPublicUrl(t.backImgSrc[0]),o=e.startNum;o<t.backImgSrc[1]+e.startNum;o++)a.push({url:"".concat(e.publicUrl).concat(o,".").concat(e.format)});t.panoramaBackImg=a,this.panorama()},panorama:function(){var a=this.panoramaConfig,t=this;this.anta=new C3D.Stage({el:this.$refs.panorama,fov:a.fov});var e=this.anta;e.size(window.innerWidth,window.innerHeight).material({color:a.backColor}).update();var o=new C3D.Sprite;o.position(0,0,-600).update(),e.addChild(o),console.log("anta.fov",e.fov);var n=new window.PxLoader;n.addImage(""),n.addCompletionListener((function(){gotoIndex()}));var i=a.backImgSrc[1],r={w:a.fullImg[0],h:a.fullImg[1]},s=r.w/i,l=r.w/(2*Math.PI)*.9764,p=a.panoramaBackImg,c=new C3D.Sprite,d={lat:0,lon:0},u={lon:0,lat:0},m={lon:a.initDeg,lat:0},h=!0;function g(){c.name("panoBg").position(0,0,0).update(),o.addChild(c);for(var a=0;a<i;a++){var t=new C3D.Plane,e=-360/i*a,n=e/180*Math.PI,d=l;t.size(s,r.h).position(Math.sin(n)*d,0,Math.cos(n)*d).rotation(0,e+180,0).visibility({alpha:0}).material({image:p[a].url,bothsides:!1}).update(),c.addChild(t)}}g();var f=[],v=new C3D.Sprite;v.name("panoItems").position(0,0,0).update(),f.forEach((function(a,t){var e=a,o=Math.floor(e.x/s),n=Math.floor((e.x+e.w)/s),p=(e.x,new C3D.Sprite);p.visibility({alpha:0}).updateV();for(var c=o;n>=c;c++){var d=new C3D.Plane,u=-360/i*c,m=u/180*Math.PI,h=l;d.size(s,e.h).position((Math.sin(m)*h).toFixed(5),e.y+e.h/2-r.h/2,(Math.cos(m)*h).toFixed(5)).rotation(0,u+180,0).material({image:e.imgs[c-o],bothsides:!1}).update(),p.addChild(d)}var g=-360/i*(n+o)/2+180,f=g/180*Math.PI,w=e.l;p.position(Math.sin(f)*w,0,Math.cos(f)*w).updateT(),v.addChild(p)})),o.addChild(v);var w=new C3D.Sprite;w.name("panoDots").visibility({alpha:0}).position(0,0,0).update(),a.hotspotList.forEach((function(a,t){var e=a,o=-360*(e.x-80)/r.w,n=90*(e.y-r.h/2)/r.h,i=o/180*Math.PI,s=l-80,p=C3D.create({type:"sprite",name:e.name,scale:[1],children:[{type:"plane",name:"dot",size:[e.w,e.h],position:[0,2,2],rotation:[n,0,0],material:[{image:e.imgUrl}],bothsides:!1},{type:"plane",name:"label",size:[0,e.h],rotation:[n,0,0],origin:[-18,33],material:[{image:e.imgUrl}],bothsides:!1}]});p.position(Math.sin(i)*s,.9*(e.y-r.h/2),Math.cos(i)*s).rotation(0,o+180-5,0).updateT(),p.on("touchend",(function(){"tips_move_rqq2"!=p._name&&p.update()})),p.on("touchstart",(function(){"tips_move_rqq2"!=p._name&&p.update()})),p.r0=o,p.w0=e.w,p.dot.alpha=0,p.dot.updateV(),function(){"m"==p._name[5]&&JT.to(p.dot,2,{x:-(p.dot.x+300),y:p.dot.y+600,yoyo:!1,repeat:-1,ease:JT.Quad.InOut,onUpdate:function(){this.target.updateT()}}),"s"==p._name[5]&&JT.to(p.dot,3,{x:-(p.dot.x+400),y:p.dot.y+400,yoyo:!1,repeat:-1,ease:JT.Quad.InOut,onUpdate:function(){this.target.updateT()}})}(),w.addChild(p)})),o.addChild(w);var b={x:0,y:0},y={x:0,y:0},x={x:0,y:0},T="",C=0,M=0,Y=0,I=0,_=function(a){T="",a=a.changedTouches[0],"m"==a.target.parentNode.attributes["data-name"].value?(e.off("touchmove",k),e.off("touchend",U)):(b.x=y.x=x.x=a.clientX,b.y=y.y=x.y=a.clientY,C=M=Date.now(),Y=I=0,e.on("touchmove",k),e.on("touchend",U))};e.on("touchstart",_);var k=function(a){return e.off("touchend",U),a=a.changedTouches[0],x.x=a.clientX,x.y=a.clientY,M=Date.now(),z(),y.x=x.x,y.y=x.y,C=M,!1},U=function a(o){M=Date.now();t.$emit("hotspotClick",{dataName:o.target.parentNode.attributes["data-name"].value}),e.off("touchmove",k),e.off("touchend",a)};function z(){J(x.x-b.x),J(x.y-b.y),Y=J(x.x-y.x),I=J(x.y-y.y),(M-C)/1e3,""==T&&(Math.abs(Y)>Math.abs(I)?T="x":Math.abs(Y)<Math.abs(I)&&(T="y")),h||(m.lon=(m.lon-.2*Y)%360,m.lat=Math.max(-1*a.vertical,Math.min(a.vertical,m.lat+.2*I)))}function J(a){return Math.floor(100*a)/100}function q(){var t=(d.lon+u.lon+m.lon)%360,e=.2*(d.lat+u.lat+m.lat);t-c.rotationY>180&&(c.rotationY+=360),t-c.rotationY<-180&&(c.rotationY-=360);var n=t-c.rotationY,i=e-c.rotationX;Math.abs(n)<.1?c.rotationY=t:c.rotationY+=.3*n,Math.abs(i)<.1?c.rotationX=e:c.rotationX+=a.wobble*i,c.updateT(),w.rotationY=c.rotationY,w.rotationX=c.rotationX,w.updateT(),t-v.rotationY>180&&(v.rotationY+=360),t-v.rotationY<-180&&(v.rotationY-=360);var r=t-v.rotationY,s=e-v.rotationX;Math.abs(r)<.1?v.rotationY=t:v.rotationY+=.25*r,Math.abs(s)<.1?v.rotationX=e:v.rotationX+=.15*s,v.updateT();var l=-150-20*Math.abs(n);o.z+=.1*(l-o.z),o.updateT(),S(w.rotationY);requestAnimationFrame(q);D||(D=!0)}requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){setTimeout(a,1e3/60)};var D=!1;function S(a){var t=(-180-a)%360;t=t>0?t-360:t;for(var e=0,o=w.children.length;o>e;e++){var n=w.children[e];n.r0>t-5&&n.r0<t+25?0==n.label.width&&(n.label,n.label.width=50,n.dot.alpha=1,n.dot.updateV()):50==n.label.width&&(n.label,n.label.width=0,n.dot.alpha=.5,n.dot.updateV())}}window.ontouchmove=function(a){a.preventDefault()};var O=new Orienter;O.handler=function(a){d.lon=-a.lon,d.lat=a.lat,h&&(u.lat=-d.lat,u.lon=-d.lon)},O.init(),window.gotoIndex=function(){JT.fromTo(o,6,{z:-2400},{z:-150,ease:JT.Quad.Out,onUpdate:function(){this.target.updateT().updateV()},onEnd:function(){h=!1,q(),JT.to($("#bg"),1,{opacity:1});for(var a=0;a<w.children.length;a++)JT.to(w.children[a]["dot"],1,{alpha:1,ease:JT.Quad.In,onUpdate:function(){this.target.updateV()}})}}),JT.fromTo(c,4,{rotationY:-720},{rotationY:a.initDeg,ease:JT.Quad.Out,onUpdate:function(){this.target.updateT().updateV()},onEnd:function(){}});for(var t=0,e=c.children.length;e>t;t++)JT.from(c.children[t],.5,{x:0,z:0,scaleX:0,scaleY:0,delay:.05*t,ease:JT.Quad.Out,onUpdate:function(){this.target.updateT()},onStart:function(){this.target.visibility({alpha:1}).updateV()}});for(var n=0,i=v.children.length;i>n;n++)JT.from(v.children[n],2,{x:0,z:0,scaleX:.01,scaleY:.01,scaleZ:.01,delay:Math.random()+2,ease:JT.Quad.Out,onUpdate:function(){this.target.updateT()},onStart:function(){this.target.visibility({alpha:1}).updateV()}});JT.fromTo(v,4,{rotationY:-720},{rotationY:25,ease:JT.Quad.Out,onUpdate:function(){this.target.updateT().updateV()}}),JT.fromTo(w,2,{rotationY:-360,alpha:0},{rotationY:25,alpha:1,delay:2,ease:JT.Quad.Out,onUpdate:function(){this.target.updateT().updateV()},onStart:function(){this.target.visibility({alpha:1}).updateV()}})},n.start()},c3dUpdate:function(){this.anta.size(window.innerWidth,window.innerHeight).update()},getPublicUrl:function(a){var t=a.split("/"),e=t[t.length-1].replace(/[^\d]/gi,""),o=a.indexOf("".concat(e,"."));return{publicUrl:a.slice(0,o),format:a.slice(a.indexOf("".concat(e,"."))+e.length+1),startNum:parseInt(e)}}},components:{MyHeader:i["a"]}}),p=l,c=(e("ccca"),e("9ca4")),d=Object(c["a"])(p,r,s,!1,null,"0944c9a3",null),u=d.exports,m={name:"",data:function(){return{pageTitle:"360全景",panoramaConfig:{fullImg:[2664,1332],backImgSrc:["https://img.vrupup.com/web/szq/panorama360/images/panorama/backimg/page_1.jpg",24],fov:.5,backColor:"#62312E",initDeg:55,vertical:1,wobble:1,hotspotList:[{name:"title1",w:244,h:400,x:1800,y:500,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_16.png"},{name:"title2",w:243,h:280,x:2200,y:540,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_17.png"},{name:"title3",w:244,h:260,x:2480,y:550,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_18.png"},{name:"title4",w:308,h:300,x:550,y:400,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_12.png"},{name:"title5",w:242,h:320,x:250,y:500,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_11.png"},{name:"title6",w:243,h:330,x:900,y:470,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_13.png"},{name:"title7",w:309,h:230,x:1150,y:550,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_14.png"},{name:"title8",w:243,h:230,x:1500,y:550,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_15.png"}]}}},mounted:function(){},methods:{hotspotClick:function(a){var t=a.dataName,e=t.replace(/[^0-9]/gi,"");1==e?alert("【花神●奇幻城堡】"):2==e?alert("【紫雾●奇幻城堡】"):3==e?alert("【千寻●奇幻城堡】"):4==e?alert("【天空之城●奇幻城堡】"):5==e?alert("【天鹅●奇幻城堡】"):6==e?alert("【无界●奇幻城堡】"):7==e?alert("【贤者之城●奇幻城堡】"):8==e&&alert("【浮梦●奇幻城堡】")}},components:{MyHeader:i["a"],PanoramaWeek:u}},h=m,g=Object(c["a"])(h,o,n,!1,null,"59e39b7f",null);t["default"]=g.exports},a1ea:function(a,t,e){},ccca:function(a,t,e){"use strict";var o=e("a1ea"),n=e.n(o);n.a}}]);