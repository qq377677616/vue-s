(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-261cfd8a"],{"0548":function(e,t,i){"use strict";var a=i("8473e"),s=i.n(a);s.a},"226c9":function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"body upload"},[i("My-Header",{attrs:{title:e.pageTitle}}),i("div",{attrs:{id:"box"}},[i("div",{attrs:{id:"upload"}},[i("div",{staticClass:"img-video"},[i("div",{staticClass:"ul"},[i("div",{staticClass:"li"},[i("van-uploader",{ref:"uploader",attrs:{accept:e.accept,multiple:"","preview-size":"80px","max-count":e.maxImageZhang,"before-delete":e.beforeDelete},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}}),e.isHuawei?i("div",{staticClass:"click",on:{click:e.isActionsShow}}):e._e()],1)])])]),i("button",{staticClass:"submit",on:{click:e.submit}},[e._v("确认上传")]),i("van-action-sheet",{attrs:{actions:e.actions},on:{select:e.onSelect},model:{value:e.actionsShow,callback:function(t){e.actionsShow=t},expression:"actionsShow"}})],1)],1)},s=[],o=(i("3466"),i("ecb4"),i("ea69"),i("20a5"),i("71c2")),n=i("4ec3"),c=i("bbd5"),l={name:"",data:function(){return{pageTitle:"vant上传",upLoadUrl:"http://game.flyh5.cn/game/walmartShare/public/index/index/upload_szq",accept:"image/*",maxImageZhang:9,maxVideoZhang:9,FormData:new FormData,curType:1,allSize:0,fileList:[],videosrc:"",actionsShow:!1,actions:[{name:"相册",index:0},{name:"相机（摄像头）",index:1}],isHuawei:!1}},created:function(){},mounted:function(){this.isSystems()},methods:{onSelect:function(e){this.isActionsShow();var t=document.getElementsByClassName("van-uploader__input")[0];0==e.index?t.removeAttribute("capture"):1==e.index&&t.setAttribute("capture","camcorder"),console.log("this.$refs.uploader",this.$refs.uploader),this.$refs.uploader.chooseFile()},isActionsShow:function(){this.actionsShow=!this.actionsShow},clickInput:function(){console.log("this.$refs.uploader",this.$refs.uploader),this.$refs.uploader.chooseFile()},beforeDelete:function(e){console.log("删除后file",e),this.fileList.splice(this.fileList.findIndex((function(t){return t==e})),1)},submit:function(){var e=this;if(0!=this.fileList.length){this.$toast.loading({message:"文件上传中",duration:0,loadingType:"spinner"}),console.log("待上传文件列表",this.fileList);for(var t=0;t<this.fileList.length;t++)this.allSize+=this.fileList[t].file.size/1024/1024,this.FormData.append("files[]",this.fileList[t].file);console.log("文件总大小：","".concat(this.allSize.toFixed(2),"M"));var i={onUploadProgress:function(e){console.log(e.loaded/e.total*100|0)}};Object(n["uploadImg"])(this.FormData,this.upLoadUrl,"post",i).then((function(t){setTimeout((function(){e.$toast("上传成功"),e.FormData=new FormData,e.allSize=0,e.fileList=[],console.log("多图上传返回",t),e.videosrc=t.data.img[0]}),800)}))}else this.$toast("请先选择文件")},isSystems:function(){var e=this;Object(c["j"])().then((function(t){var i=t.system.toLowerCase();-1!=i.indexOf("al00a")||-1!=i.indexOf("al00ta")||-1!=i.indexOf("huawei")?(console.log("【华为手机】"),e.isHuawei=!0):console.log("【不是华为手机】")}))}},components:{MyHeader:o["a"]}},r=l,u=(i("e5fd"),i("9ca4")),d=Object(u["a"])(r,a,s,!1,null,"ca7df20a",null);t["default"]=d.exports},"71c2":function(e,t,i){"use strict";var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header"},[i("div",{staticClass:"wrap"},[e.isBack?i("div",{staticClass:"back",on:{click:e.back}},[i("i",{staticClass:"iconfont icon-fanhui1"})]):e._e(),i("h3",[e._v(e._s(e.title))])])])},s=[],o=(i("e35a"),i("5e9f"),{name:"",props:{title:{type:String,default:"页面标题"},isBack:{type:Boolean,default:!0}},data:function(){return{}},methods:{back:function(){var e=sessionStorage.getItem("prevPage")||"/";this.$router.replace(e),sessionStorage.setItem("prevPage","")}}}),n=o,c=(i("0548"),i("9ca4")),l=Object(c["a"])(n,a,s,!1,null,"20ec2505",null);t["a"]=l.exports},"8473e":function(e,t,i){},d43c:function(e,t,i){},e5fd:function(e,t,i){"use strict";var a=i("d43c"),s=i.n(a);s.a}}]);