(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f09451da"],{"0548":function(a,t,o){"use strict";var e=o("7344"),n=o.n(e);n.a},"71c2":function(a,t,o){"use strict";var e=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("div",{staticClass:"header"},[o("div",{staticClass:"wrap"},[a.isBack?o("div",{staticClass:"back",on:{click:a.back}},[o("i",{staticClass:"iconfont icon-fanhui1"})]):a._e(),o("h3",[a._v(a._s(a.title))])])])},n=[],i=(o("e35a"),o("5e9f"),{name:"",props:{title:{type:String,default:"页面标题"},isBack:{type:Boolean,default:!0}},data:function(){return{}},methods:{back:function(){var a=sessionStorage.getItem("prevPage")||"/";this.$router.replace(a),sessionStorage.setItem("prevPage","")}}}),r=i,s=(o("0548"),o("e90a")),l=Object(s["a"])(r,e,n,!1,null,"20ec2505",null);t["a"]=l.exports},7344:function(a,t,o){},"982c":function(a,t,o){"use strict";o.r(t);var e=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("div",{staticClass:"body"},[o("my-header",{attrs:{title:a.pageTitle}}),o("panorama-week",{attrs:{panoramaConfig:a.panoramaConfig},on:{hotspotClick:a.hotspotClick}})],1)},n=[],i=(o("e35a"),o("5e9f"),o("71c2")),r=function(){var a=this,t=a.$createElement,o=a._self._c||t;return o("div",[o("div",{ref:"panorama",attrs:{id:"panorama"}})])},s=[],l=(o("b4fb"),o("fe59"),o("ecb4"),o("77ad"),o("053b"),o("20a5"),o("0d7a"),o("08ba"),{name:"",props:{panoramaConfig:{type:Object,value:{}}},data:function(){return{anta:null}},mounted:function(){this.panoramaInit()},methods:{panoramaInit:function(){for(var a=[],t=this.panoramaConfig,o=this.getPublicUrl(t.backImgSrc[0]),e=o.startNum;e<t.backImgSrc[1]+o.startNum;e++)a.push({url:"".concat(o.publicUrl).concat(e,".").concat(o.format)});t.panoramaBackImg=a,this.panorama()},panorama:function(){var a=this.panoramaConfig,t=this;this.anta=new C3D.Stage({el:this.$refs.panorama,fov:a.fov});var o=this.anta;o.size(window.innerWidth,window.innerHeight).material({color:a.backColor}).update();var e=new C3D.Sprite;e.position(0,0,-600).update(),o.addChild(e),console.log("anta.fov",o.fov);var n=new window.PxLoader;n.addImage(""),n.addCompletionListener((function(){gotoIndex()}));var i=a.backImgSrc[1],r={w:a.fullImg[0],h:a.fullImg[1]},s=r.w/i,l=r.w/(2*Math.PI)*.9764,p=a.panoramaBackImg,d=new C3D.Sprite,u={lat:0,lon:0},c={lon:0,lat:0},m={lon:a.initDeg,lat:0},h=!0;function g(){d.name("panoBg").position(0,0,0).update(),e.addChild(d);for(var a=0;a<i;a++){var t=new C3D.Plane,o=-360/i*a,n=o/180*Math.PI,u=l;t.size(s,r.h).position(Math.sin(n)*u,0,Math.cos(n)*u).rotation(0,o+180,0).visibility({alpha:0}).material({image:p[a].url,bothsides:!1}).update(),d.addChild(t)}}g();var f=[],v=new C3D.Sprite;v.name("panoItems").position(0,0,0).update(),f.forEach((function(a,t){var o=a,e=Math.floor(o.x/s),n=Math.floor((o.x+o.w)/s),p=(o.x,new C3D.Sprite);p.visibility({alpha:0}).updateV();for(var d=e;n>=d;d++){var u=new C3D.Plane,c=-360/i*d,m=c/180*Math.PI,h=l;u.size(s,o.h).position((Math.sin(m)*h).toFixed(5),o.y+o.h/2-r.h/2,(Math.cos(m)*h).toFixed(5)).rotation(0,c+180,0).material({image:o.imgs[d-e],bothsides:!1}).update(),p.addChild(u)}var g=-360/i*(n+e)/2+180,f=g/180*Math.PI,w=o.l;p.position(Math.sin(f)*w,0,Math.cos(f)*w).updateT(),v.addChild(p)})),e.addChild(v);var w=new C3D.Sprite;w.name("panoDots").visibility({alpha:0}).position(0,0,0).update(),a.hotspotList.forEach((function(a,t){var o=a,e=-360*(o.x-80)/r.w,n=90*(o.y-r.h/2)/r.h,i=e/180*Math.PI,s=l-80,p=C3D.create({type:"sprite",name:o.name,scale:[1],children:[{type:"plane",name:"dot",size:[o.w,o.h],position:[0,2,2],rotation:[n,0,0],material:[{image:o.imgUrl}],bothsides:!1},{type:"plane",name:"label",size:[0,o.h],rotation:[n,0,0],origin:[-18,33],material:[{image:o.imgUrl}],bothsides:!1}]});p.position(Math.sin(i)*s,.9*(o.y-r.h/2),Math.cos(i)*s).rotation(0,e+180-5,0).updateT(),p.on("touchend",(function(){"tips_move_rqq2"!=p._name&&p.update()})),p.on("touchstart",(function(){"tips_move_rqq2"!=p._name&&p.update()})),p.r0=e,p.w0=o.w,p.dot.alpha=0,p.dot.updateV(),function(){"m"==p._name[5]&&JT.to(p.dot,2,{x:-(p.dot.x+300),y:p.dot.y+600,yoyo:!1,repeat:-1,ease:JT.Quad.InOut,onUpdate:function(){this.target.updateT()}}),"s"==p._name[5]&&JT.to(p.dot,3,{x:-(p.dot.x+400),y:p.dot.y+400,yoyo:!1,repeat:-1,ease:JT.Quad.InOut,onUpdate:function(){this.target.updateT()}})}(),w.addChild(p)})),e.addChild(w);var b={x:0,y:0},y={x:0,y:0},x={x:0,y:0},T="",C=0,M=0,Y=0,I=0,_=function(a){T="",a=a.changedTouches[0],"m"==a.target.parentNode.attributes["data-name"].value?(o.off("touchmove",k),o.off("touchend",U)):(b.x=y.x=x.x=a.clientX,b.y=y.y=x.y=a.clientY,C=M=Date.now(),Y=I=0,o.on("touchmove",k),o.on("touchend",U))};o.on("touchstart",_);var k=function(a){return o.off("touchend",U),a=a.changedTouches[0],x.x=a.clientX,x.y=a.clientY,M=Date.now(),z(),y.x=x.x,y.y=x.y,C=M,!1},U=function a(e){M=Date.now();t.$emit("hotspotClick",{dataName:e.target.parentNode.attributes["data-name"].value}),o.off("touchmove",k),o.off("touchend",a)};function z(){J(x.x-b.x),J(x.y-b.y),Y=J(x.x-y.x),I=J(x.y-y.y),(M-C)/1e3,""==T&&(Math.abs(Y)>Math.abs(I)?T="x":Math.abs(Y)<Math.abs(I)&&(T="y")),h||(m.lon=(m.lon-.2*Y)%360,m.lat=Math.max(-1*a.vertical,Math.min(a.vertical,m.lat+.2*I)))}function J(a){return Math.floor(100*a)/100}function q(){var t=(u.lon+c.lon+m.lon)%360,o=.2*(u.lat+c.lat+m.lat);t-d.rotationY>180&&(d.rotationY+=360),t-d.rotationY<-180&&(d.rotationY-=360);var n=t-d.rotationY,i=o-d.rotationX;Math.abs(n)<.1?d.rotationY=t:d.rotationY+=.3*n,Math.abs(i)<.1?d.rotationX=o:d.rotationX+=a.wobble*i,d.updateT(),w.rotationY=d.rotationY,w.rotationX=d.rotationX,w.updateT(),t-v.rotationY>180&&(v.rotationY+=360),t-v.rotationY<-180&&(v.rotationY-=360);var r=t-v.rotationY,s=o-v.rotationX;Math.abs(r)<.1?v.rotationY=t:v.rotationY+=.25*r,Math.abs(s)<.1?v.rotationX=o:v.rotationX+=.15*s,v.updateT();var l=-150-20*Math.abs(n);e.z+=.1*(l-e.z),e.updateT(),S(w.rotationY);requestAnimationFrame(q);D||(D=!0)}requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||function(a){setTimeout(a,1e3/60)};var D=!1;function S(a){var t=(-180-a)%360;t=t>0?t-360:t;for(var o=0,e=w.children.length;e>o;o++){var n=w.children[o];n.r0>t-5&&n.r0<t+25?0==n.label.width&&(n.label,n.label.width=50,n.dot.alpha=1,n.dot.updateV()):50==n.label.width&&(n.label,n.label.width=0,n.dot.alpha=.5,n.dot.updateV())}}window.ontouchmove=function(a){a.preventDefault()};var O=new Orienter;O.handler=function(a){u.lon=-a.lon,u.lat=a.lat,h&&(c.lat=-u.lat,c.lon=-u.lon)},O.init(),window.gotoIndex=function(){JT.fromTo(e,6,{z:-2400},{z:-150,ease:JT.Quad.Out,onUpdate:function(){this.target.updateT().updateV()},onEnd:function(){h=!1,q(),JT.to($("#bg"),1,{opacity:1});for(var a=0;a<w.children.length;a++)JT.to(w.children[a]["dot"],1,{alpha:1,ease:JT.Quad.In,onUpdate:function(){this.target.updateV()}})}}),JT.fromTo(d,4,{rotationY:-720},{rotationY:a.initDeg,ease:JT.Quad.Out,onUpdate:function(){this.target.updateT().updateV()},onEnd:function(){}});for(var t=0,o=d.children.length;o>t;t++)JT.from(d.children[t],.5,{x:0,z:0,scaleX:0,scaleY:0,delay:.05*t,ease:JT.Quad.Out,onUpdate:function(){this.target.updateT()},onStart:function(){this.target.visibility({alpha:1}).updateV()}});for(var n=0,i=v.children.length;i>n;n++)JT.from(v.children[n],2,{x:0,z:0,scaleX:.01,scaleY:.01,scaleZ:.01,delay:Math.random()+2,ease:JT.Quad.Out,onUpdate:function(){this.target.updateT()},onStart:function(){this.target.visibility({alpha:1}).updateV()}});JT.fromTo(v,4,{rotationY:-720},{rotationY:25,ease:JT.Quad.Out,onUpdate:function(){this.target.updateT().updateV()}}),JT.fromTo(w,2,{rotationY:-360,alpha:0},{rotationY:25,alpha:1,delay:2,ease:JT.Quad.Out,onUpdate:function(){this.target.updateT().updateV()},onStart:function(){this.target.visibility({alpha:1}).updateV()}})},n.start()},c3dUpdate:function(){this.anta.size(window.innerWidth,window.innerHeight).update()},getPublicUrl:function(a){var t=a.split("/"),o=t[t.length-1].replace(/[^\d]/gi,""),e=a.indexOf("".concat(o,"."));return{publicUrl:a.slice(0,e),format:a.slice(a.indexOf("".concat(o,"."))+o.length+1),startNum:parseInt(o)}}},components:{MyHeader:i["a"]}}),p=l,d=(o("ccca"),o("e90a")),u=Object(d["a"])(p,r,s,!1,null,"0944c9a3",null),c=u.exports,m={name:"",data:function(){return{pageTitle:"360全景",panoramaConfig:{fullImg:[2664,1332],backImgSrc:["https://img.vrupup.com/web/szq/panorama360/images/panorama/backimg/page_1.jpg",24],fov:.5,backColor:"#62312E",initDeg:55,vertical:1,wobble:1,hotspotList:[{name:"title1",w:244,h:400,x:1800,y:500,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_16.png"},{name:"title2",w:243,h:280,x:2200,y:540,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_17.png"},{name:"title3",w:244,h:260,x:2480,y:550,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_18.png"},{name:"title4",w:308,h:300,x:550,y:400,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_12.png"},{name:"title5",w:242,h:320,x:250,y:500,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_11.png"},{name:"title6",w:243,h:330,x:900,y:470,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_13.png"},{name:"title7",w:309,h:230,x:1150,y:550,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_14.png"},{name:"title8",w:243,h:230,x:1500,y:550,imgUrl:"https://img.vrupup.com/web/szq/panorama360/images/panorama/goods/page8_15.png"}]}}},mounted:function(){},methods:{hotspotClick:function(a){var t=a.dataName,o=t.replace(/[^0-9]/gi,"");1==o?alert("【花神●奇幻城堡】"):2==o?alert("【紫雾●奇幻城堡】"):3==o?alert("【千寻●奇幻城堡】"):4==o?alert("【天空之城●奇幻城堡】"):5==o?alert("【天鹅●奇幻城堡】"):6==o?alert("【无界●奇幻城堡】"):7==o?alert("【贤者之城●奇幻城堡】"):8==o&&alert("【浮梦●奇幻城堡】")}},components:{MyHeader:i["a"],PanoramaWeek:c}},h=m,g=Object(d["a"])(h,e,n,!1,null,"59e39b7f",null);t["default"]=g.exports},"9d81":function(a,t,o){},ccca:function(a,t,o){"use strict";var e=o("9d81"),n=o.n(e);n.a}}]);